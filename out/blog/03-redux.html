<!DOCTYPE html><html lang="ko"><head><meta name="viewport" content="width=device-width, initial-scale=1"/><meta charSet="utf-8"/><meta name="Description" content="Personal Blog"/><title>Henry&#x27;s log</title><meta name="next-head-count" content="4"/><link rel="preload" href="/_next/static/css/b41a285680658cab.css" as="style"/><link rel="stylesheet" href="/_next/static/css/b41a285680658cab.css" data-n-g=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-c67a75d1b6f99dc8.js"></script><script src="/_next/static/chunks/webpack-660c25f5326cfe89.js" defer=""></script><script src="/_next/static/chunks/framework-5f4595e5518b5600.js" defer=""></script><script src="/_next/static/chunks/main-9b95277ed2619e28.js" defer=""></script><script src="/_next/static/chunks/pages/_app-d1fa4175fc69bdc0.js" defer=""></script><script src="/_next/static/chunks/184-8452e3c4cd85067e.js" defer=""></script><script src="/_next/static/chunks/829-2de3f684eb5fbc3a.js" defer=""></script><script src="/_next/static/chunks/pages/blog/03-redux-746ecbef2e335d86.js" defer=""></script><script src="/_next/static/HPZ7aYl1DCoRILVvtuLIo/_buildManifest.js" defer=""></script><script src="/_next/static/HPZ7aYl1DCoRILVvtuLIo/_ssgManifest.js" defer=""></script><style id="__jsx-2777855943">.hide.jsx-2777855943{display:none;}h1.jsx-2777855943{font-size:1.5rem;font-weight:700;color:var(--color-header);font-family:"Recoleta-bold";}.great-title.jsx-2777855943{margin-top:2.5rem;font-size:3.125rem;text-align:center;color:var(--color-header);}.details.jsx-2777855943 span.jsx-2777855943{color:#bdbdbd;margin-right:1rem;}.details.jsx-2777855943{font-weight:300;margin-bottom:2px;font-size:11pt;line-height:22pt;-webkit-letter-spacing:0.8px;-moz-letter-spacing:0.8px;-ms-letter-spacing:0.8px;letter-spacing:0.8px;font-family:"NotoSansKR-Thin",MalgunGothic;}.date.jsx-2777855943{font-size:15px;}</style></head><body><script>(function() {
	function setInitialColorMode() {
  function getInitialColorMode() {
    const persistedColorPreference = window.localStorage.getItem("theme");
    const hasPersistedPreference = typeof persistedColorPreference === "string";
    /**
     * If the user has explicitly chosen light or dark,
     * use it. Otherwise, this value will be null.
     */

    if (hasPersistedPreference) {
      return persistedColorPreference;
    } // If there is no saved preference, use a media query


    const mql = window.matchMedia("(prefers-color-scheme: dark)");
    const hasMediaQueryPreference = typeof mql.matches === "boolean";

    if (hasMediaQueryPreference) {
      return mql.matches ? "dark" : "light";
    } // default to 'light'.


    return "light";
  }

  const colorMode = getInitialColorMode();
  const root = document.documentElement;
  root.style.setProperty("--initial-color-mode", colorMode); // add HTML attribute if dark mode

  if (colorMode === "dark") document.documentElement.setAttribute("data-theme", "dark");
}
	setInitialColorMode();
})()
</script><div id="__next" data-reactroot=""><div class="container"><main><div style="display:flex;align-items:center;justify-content:center;margin:0 4rem 0 4rem;flex-shrink:0"><div class="shake-it" style="flex:9"><a href="/"><h1 style="font-size:1.125rem">Henry</h1></a></div><div style="flex-shrink:0;width:15px"></div><a href="/blog"><h2 style="font-size:0.825rem;padding-right:5px">Blog</h2></a><div style="flex-shrink:0;width:15px"></div><a href="https://lee-note.notion.site/82a3ac3053a9457b9f1a4e1b3d7baedc?v=2acb0e3dd5c64d4d8582ee28f193acd7" target="_blank"><h2 style="font-size:0.825rem">Read</h2></a><div style="flex-shrink:0;width:15px"></div><a href="/about"><h2 style="font-size:0.825rem">About</h2></a><div style="flex-shrink:0;width:15px"></div><label style="padding-bottom:2.8px"><input type="checkbox"/><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 48 48" width="1em" height="1em" style="position:relative;font-size:25px;top:3.465px"><path fill="#FF9800" d="M11 11h26v26H11z"></path><path fill="#FF9800" d="M6 24 24 6l18 18-18 18z"></path><path fill="#FFEB3B" d="M13 24c0 6.077 4.923 11 11 11 6.076 0 11-4.923 11-11s-4.924-11-11-11c-6.077 0-11 4.923-11 11"></path></svg></label></div><div class="content"><div><h1 class="jsx-2777855943 great-title">Redux</h1><div class="jsx-2777855943 details"><span class="jsx-2777855943 hide">Nov 15, 2020</span><span class="jsx-2777855943 hide">7 min read</span></div><article><div style="margin-top:4rem;font-family:Poppins, NotoSansKR-Thin, MalgunGothic;font-size:11pt;line-height:22pt;letter-spacing:.8px"><h1>Redux</h1><hr/><p>리덕스는 <code>actions</code> 이벤트를 사용하여 어플리케이션의 상태를 관리하고 업데이트 하는 패턴 및 라이브러리 입니다.
리덕스는 상태관리를 컴포넌트 밖에서 합니다. 앱의 상태 전부는 하나의 <strong>store</strong> 안에
있는 객체 트리에 저장됩니다. <strong>상태 트리를 변경</strong> 하는 방법은 <strong>action</strong>을 보내는 것 뿐입니다.
액션이 상태트리를 어떻게 변경할지 명시하기 위해 <strong>reducers</strong>를 작성해야 합니다.</p><hr/><p><strong>리덕스를 언제 사용해야 할까요</strong></p><blockquote>
<p>I would like to amend this: don&#x27;t use Redux until you have problems with vanilla React. - Dan Abramov</p>
</blockquote><ul>
<li>앱의 여러 위치에 필요한 많은 양의 상태를 갖고 있을 때</li>
<li>앱의 상태가 자주 업데이트 될때</li>
<li>상태 업데이트 로직이 복잡할때</li>
<li>많은 사람들이 작업하고, 중간 또는 큰 사이즈의 코드 베이스를 가질때</li>
</ul><hr/><div class="blog-post"><pre class="language-ts"><code class="language-ts"><span class="token comment">// one-way data flow</span>
<span class="token keyword">function</span> <span class="token function"><span class="token maybe-class-name">Counter</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// State: the source of truth that drives our app;</span>
    <span class="token keyword">const</span> <span class="token punctuation">[</span>counter<span class="token punctuation">,</span> setCounter<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// Action: the events that occur in the app based on user input,</span>
    <span class="token comment">// and trigger updates in the state</span>
    <span class="token keyword">const</span> <span class="token function-variable function">increment</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token function">setCounter</span><span class="token punctuation">(</span><span class="token punctuation">(</span>prevCounter<span class="token punctuation">)</span> <span class="token arrow operator">=&gt;</span> prevCounter <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>

    <span class="token comment">// View: a declarative description of the UI based on the current state</span>
    <span class="token keyword control-flow">return</span> <span class="token punctuation">(</span>
        <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
            <span class="token maybe-class-name">Value</span><span class="token operator">:</span> <span class="token punctuation">{</span>counter<span class="token punctuation">}</span> <span class="token operator">&lt;</span>button onClick<span class="token operator">=</span><span class="token punctuation">{</span>increment<span class="token punctuation">}</span><span class="token operator">&gt;</span><span class="token maybe-class-name">Increment</span><span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><div class="think"><p>컴포넌트를 만들때, UI를 만들고 해당 UI 에서는 button 이나 Input등의 이벤트를
발생시키고, 이를 통해 상태를 변경 할텐데, Redux로 해당 UI에서 상태가
변경되었다를 알리기 위해서 Action을 Dispatch를 합니다. (말 그대로 일어난
이벤트를 보낸다) 그러면 store에 있는 리듀서가 해당 액션을 처리하여 새로운
상태로 값을 반환할텐데, 이때 리듀서는 어떤 액션이 들어왔는지 구분하기 위해서
type이라는 속성을 갖게 됩니다.</p></div><h1>Actions</h1><p>action은 객체 형태로 애플리케이션에서 스토어로 보내는 데이터 묶음 입니다. <code>store.dispatch()</code>를 통해서 보냅니다. 반드시 <strong>type</strong> 속성을 가져야 합니다.
type 속성값은 리듀서에 액션 객체를 구분할 때도 사용되기 때문에 상수 변수로 만드는것이 좋습니다. 액션은 어플리케이션에서 발생한 작업을 설명하는 이벤트라고 생각하면 됩니다.
<strong>payload</strong> 필드에는 추가적인 정보가 담겨있습니다.</p><div class="think"><p>React 자체의 상태관리를 할때에는 해당 함수 안에서 상태를 관리하는데 반해
redux는 global store를 통해 모든 앱에서의 상태를 공유 하게 됩니다. 이는 곧,
해당 상태가 바뀌었다는 정보를 global store에 전달해줘야 한다는 얘기이며,
이를 위해 action을 dispatch 합니다.</p></div><hr/><h1>Reducers</h1><p>reducer는 이전 상태값과, 액션 객체를 입력으로 받아 새로운 상태값을 만드는 <strong>순수함수</strong>
입니다. <code>(state, action) =&gt; newState</code> 리듀서를 액션 타입을 기준으로 이벤트를 처리 하는 이벤트 리스너라고 생각할 수 있습니다.
사이드 이펙트를 일으켜서는 안되며, state를 직접적으로 변경해서는 안됩니다. 불변성을 유지하며 상태를 업데이트 해야 합니다.</p><div class="blog-post"><pre class="language-js"><code class="language-js"><span class="token keyword">const</span> initialState <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token literal-property property">value</span><span class="token operator">:</span> <span class="token number">0</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">counterReducer</span><span class="token punctuation">(</span><span class="token parameter">state <span class="token operator">=</span> initialState<span class="token punctuation">,</span> action</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// Check to see if the reducer cares about this action</span>
    <span class="token keyword control-flow">if</span> <span class="token punctuation">(</span>action<span class="token punctuation">.</span><span class="token property-access">type</span> <span class="token operator">===</span> <span class="token string">&quot;counter/increment&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// If so, make a copy of `state`</span>
        <span class="token keyword control-flow">return</span> <span class="token punctuation">{</span>
            <span class="token spread operator">...</span>state<span class="token punctuation">,</span>
            <span class="token comment">// and update the copy with the new value</span>
            <span class="token literal-property property">value</span><span class="token operator">:</span> state<span class="token punctuation">.</span><span class="token property-access">value</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// otherwise return the existing state unchanged</span>
    <span class="token keyword control-flow">return</span> state<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><br/><h1>Middleware</h1><p>미들웨어는 리듀서가 액션을 처리하기전에 실행되는 함수 입니다. 디버깅 목적으로 상탯값
변경시 로그를 출력하거나, API 호출 등의 목적으로 활용 가능합니다.</p><br/><h1>Selector</h1><p><code>useSelector</code> 훅을 활용하면 store에 있는 데이터를 읽어올 수 있습니다.
selector 함수는 모든 state object를 받고, 값으로 반환해야 합니다.
selector 함수는 리덕스 스토어가 업데이트 되면 언제든지 재실행 됩니다. 그리고 만약 데이터가 변경된 경우 컴포넌트는 다시 렌더링 됩니다.
즉, 리렌더링이 언제든지 일어날 수 있기 때문에, 컴포넌트들은 항상 스토어로부터 필요한 최소한의 데이터를 select 하여 실제 필요한 경우에만 렌더링 되도록 해야 합니다.
이를 방지하기 위해 RTK 는 <code>createSelector</code> 함수를 제공합니다. <code>reselet</code> 라이브러리의 기능으로 메모이제이션을 지원하여, 무분별한 렌더링을 방지 합니다.</p><br/><br/></div></article></div></div></main><footer style="font-size:0.625rem;font-weight:200;flex-shrink:0;margin:4.125rem">2022 © Henry</footer></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{}},"page":"/blog/03-redux","query":{},"buildId":"HPZ7aYl1DCoRILVvtuLIo","nextExport":true,"autoExport":true,"isFallback":false,"scriptLoader":[]}</script></body></html>