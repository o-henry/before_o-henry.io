<!DOCTYPE html><html lang="ko"><head><meta name="viewport" content="width=device-width, initial-scale=1"/><meta charSet="utf-8"/><meta name="Description" content="Personal Blog"/><title>Henry&#x27;s log</title><meta name="next-head-count" content="4"/><link rel="preload" href="/_next/static/css/b41a285680658cab.css" as="style"/><link rel="stylesheet" href="/_next/static/css/b41a285680658cab.css" data-n-g=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-c67a75d1b6f99dc8.js"></script><script src="/_next/static/chunks/webpack-660c25f5326cfe89.js" defer=""></script><script src="/_next/static/chunks/framework-5f4595e5518b5600.js" defer=""></script><script src="/_next/static/chunks/main-9b95277ed2619e28.js" defer=""></script><script src="/_next/static/chunks/pages/_app-d1fa4175fc69bdc0.js" defer=""></script><script src="/_next/static/chunks/184-8452e3c4cd85067e.js" defer=""></script><script src="/_next/static/chunks/24-57e67c9b54ff614f.js" defer=""></script><script src="/_next/static/chunks/pages/blog/11-fp-67eb887c4ee6af86.js" defer=""></script><script src="/_next/static/HPZ7aYl1DCoRILVvtuLIo/_buildManifest.js" defer=""></script><script src="/_next/static/HPZ7aYl1DCoRILVvtuLIo/_ssgManifest.js" defer=""></script><style id="__jsx-2777855943">.hide.jsx-2777855943{display:none;}h1.jsx-2777855943{font-size:1.5rem;font-weight:700;color:var(--color-header);font-family:"Recoleta-bold";}.great-title.jsx-2777855943{margin-top:2.5rem;font-size:3.125rem;text-align:center;color:var(--color-header);}.details.jsx-2777855943 span.jsx-2777855943{color:#bdbdbd;margin-right:1rem;}.details.jsx-2777855943{font-weight:300;margin-bottom:2px;font-size:11pt;line-height:22pt;-webkit-letter-spacing:0.8px;-moz-letter-spacing:0.8px;-ms-letter-spacing:0.8px;letter-spacing:0.8px;font-family:"NotoSansKR-Thin",MalgunGothic;}.date.jsx-2777855943{font-size:15px;}</style></head><body><script>(function() {
	function setInitialColorMode() {
  function getInitialColorMode() {
    const persistedColorPreference = window.localStorage.getItem("theme");
    const hasPersistedPreference = typeof persistedColorPreference === "string";
    /**
     * If the user has explicitly chosen light or dark,
     * use it. Otherwise, this value will be null.
     */

    if (hasPersistedPreference) {
      return persistedColorPreference;
    } // If there is no saved preference, use a media query


    const mql = window.matchMedia("(prefers-color-scheme: dark)");
    const hasMediaQueryPreference = typeof mql.matches === "boolean";

    if (hasMediaQueryPreference) {
      return mql.matches ? "dark" : "light";
    } // default to 'light'.


    return "light";
  }

  const colorMode = getInitialColorMode();
  const root = document.documentElement;
  root.style.setProperty("--initial-color-mode", colorMode); // add HTML attribute if dark mode

  if (colorMode === "dark") document.documentElement.setAttribute("data-theme", "dark");
}
	setInitialColorMode();
})()
</script><div id="__next" data-reactroot=""><div class="container"><main><div style="display:flex;align-items:center;justify-content:center;margin:0 4rem 0 4rem;flex-shrink:0"><div class="shake-it" style="flex:9"><a href="/"><h1 style="font-size:1.125rem">Henry</h1></a></div><div style="flex-shrink:0;width:15px"></div><a href="/blog"><h2 style="font-size:0.825rem;padding-right:5px">Blog</h2></a><div style="flex-shrink:0;width:15px"></div><a href="https://lee-note.notion.site/82a3ac3053a9457b9f1a4e1b3d7baedc?v=2acb0e3dd5c64d4d8582ee28f193acd7" target="_blank"><h2 style="font-size:0.825rem">Read</h2></a><div style="flex-shrink:0;width:15px"></div><a href="/about"><h2 style="font-size:0.825rem">About</h2></a><div style="flex-shrink:0;width:15px"></div><label style="padding-bottom:2.8px"><input type="checkbox"/><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 48 48" width="1em" height="1em" style="position:relative;font-size:25px;top:3.465px"><path fill="#FF9800" d="M11 11h26v26H11z"></path><path fill="#FF9800" d="M6 24 24 6l18 18-18 18z"></path><path fill="#FFEB3B" d="M13 24c0 6.077 4.923 11 11 11 6.076 0 11-4.923 11-11s-4.924-11-11-11c-6.077 0-11 4.923-11 11"></path></svg></label></div><div class="content"><div><h1 class="jsx-2777855943 great-title">Functional Programming</h1><div class="jsx-2777855943 details"><span class="jsx-2777855943 hide">Aug 25, 2022</span><span class="jsx-2777855943 hide">30 min read</span></div><article><div style="margin-top:4rem;font-family:Recoleta, NotoSansKR-Thin, MalgunGothic;font-size:11pt;line-height:22pt;letter-spacing:.8px"><h1>Category Theory <sup><a href="#fn1" id="fnref1"> ¹ </a></sup></h1><p>카테고리 이론은 Object 사이의 morphism을 정의한다. composition을 정의하기에 적합한 이론이다. 합성을 위해서는 정의역과 치역의 타입이 일치해야한다.
타입스크립트에서는 Object는 타입이고 morphism 은 함수가 된다.</p><div class="blog-post"><pre class="language-ts"><code class="language-ts"><span class="token doc-comment comment">/** f :: (a: A) =&gt; B */</span>
<span class="token keyword">const</span> f <span class="token operator">=</span> <span class="token punctuation">(</span>s<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">number</span> <span class="token arrow operator">=&gt;</span> s<span class="token punctuation">.</span><span class="token property-access">length</span><span class="token punctuation">;</span>
<span class="token doc-comment comment">/** g :: (c: C) =&gt; D */</span>
<span class="token keyword">const</span> g <span class="token operator">=</span> <span class="token punctuation">(</span>n<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">boolean</span> <span class="token arrow operator">=&gt;</span> n <span class="token operator">&gt;</span> <span class="token number">2</span><span class="token punctuation">;</span>

<span class="token doc-comment comment">/**
* gf = g ∘ f
* gf :: (a: A) =&gt; D
* C = B
*/</span>
<span class="token keyword">const</span> gf <span class="token operator">=</span> <span class="token punctuation">(</span>s<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">boolean</span> <span class="token arrow operator">=&gt;</span> <span class="token function">g</span><span class="token punctuation">(</span><span class="token function">f</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token generic-function"><span class="token function">flow</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token constant">A</span><span class="token punctuation">,</span> <span class="token constant">B</span><span class="token punctuation">,</span> <span class="token constant">C</span><span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span><span class="token function-variable function">f</span><span class="token operator">:</span> <span class="token punctuation">(</span>a<span class="token operator">:</span> <span class="token constant">A</span><span class="token punctuation">)</span> <span class="token arrow operator">=&gt;</span> <span class="token constant">B</span><span class="token punctuation">,</span> <span class="token function-variable function">g</span><span class="token operator">:</span> <span class="token punctuation">(</span>b<span class="token operator">:</span> <span class="token constant">B</span><span class="token punctuation">)</span> <span class="token arrow operator">=&gt;</span> <span class="token constant">C</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token punctuation">(</span>a<span class="token operator">:</span> <span class="token constant">A</span><span class="token punctuation">)</span> <span class="token arrow operator">=&gt;</span> <span class="token constant">C</span> <span class="token punctuation">{</span>
    <span class="token keyword control-flow">return</span> <span class="token punctuation">(</span>a<span class="token punctuation">)</span> <span class="token arrow operator">=&gt;</span> <span class="token function">g</span><span class="token punctuation">(</span><span class="token function">f</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token generic-function"><span class="token function">pipe</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token constant">A</span><span class="token punctuation">,</span> <span class="token constant">B</span><span class="token punctuation">,</span> <span class="token constant">C</span><span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span>a<span class="token operator">:</span> <span class="token constant">A</span><span class="token punctuation">,</span> <span class="token function-variable function">f</span><span class="token operator">:</span> <span class="token punctuation">(</span>a<span class="token operator">:</span> <span class="token constant">A</span><span class="token punctuation">)</span> <span class="token arrow operator">=&gt;</span> <span class="token constant">B</span><span class="token punctuation">,</span> <span class="token function-variable function">g</span><span class="token operator">:</span> <span class="token punctuation">(</span>b<span class="token operator">:</span> <span class="token constant">B</span><span class="token punctuation">)</span> <span class="token arrow operator">=&gt;</span> <span class="token constant">C</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token constant">C</span>
    <span class="token keyword control-flow">return</span> <span class="token function">flow</span><span class="token punctuation">(</span>f<span class="token punctuation">,</span> g<span class="token punctuation">)</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><br/><h1>Functors <sup><a href="#fn2" id="fnref2"> ² </a></sup></h1><p>순수함수는 가변성을 금지하고 참조투명성을 위반하지 않아야 하며 이를 위반하는 요소는 사이드이펙트로 간주한다.
하지만 이러한 사이드이펙트를 완전히 배제해서는 프로그램을 개발할 수 없다. 따라서 효과적으로 이펙트를 관리하기 위해 몇가지 방법을 사용하는데 펑터도 그중 하나다.</p><blockquote>
<p>functor는 일종의 container 다.</p>
</blockquote><p>여기서 해결하고 싶은 문제는 순수함수와 이펙트를 갖는 함수의 합성을 이뤄내는것이다.</p><br/><p>DSL</p><span style="height:10px"></span><p>함수가 사이드 이펙트에 대한 설명을 반환하도록 공역을 변경한다.</p><div class="blog-post"><pre class="language-ts"><code class="language-ts"><span class="token keyword">type</span> <span class="token class-name"><span class="token constant">DSL</span></span> <span class="token operator">=</span> <span class="token spread operator">...</span> <span class="token comment">// sum type of every possible effect handled by the system</span>
<span class="token keyword">function</span> <span class="token function">log</span><span class="token punctuation">(</span>message<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token constant">DSL</span> <span class="token punctuation">{</span>
    <span class="token keyword control-flow">return</span> <span class="token punctuation">{</span>
        type<span class="token operator">:</span> <span class="token string">&quot;log&quot;</span><span class="token punctuation">,</span>
        message
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><br/><p>THUNK</p><span style="height:10px"></span><blockquote>
<p>A Thunk representing a synchronous side effect</p>
</blockquote><div class="blog-post"><pre class="language-ts"><code class="language-ts"><span class="token comment">// a thunk representing a synchronous side effect</span>
<span class="token keyword">type</span> <span class="token class-name"><span class="token constant">IO</span><span class="token operator">&lt;</span><span class="token constant">A</span><span class="token operator">&gt;</span></span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=&gt;</span> <span class="token constant">A</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> log <span class="token operator">=</span> <span class="token punctuation">(</span>message<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token constant">IO</span><span class="token operator">&lt;</span><span class="token keyword">void</span><span class="token operator">&gt;</span> <span class="token arrow operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword control-flow">return</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=&gt;</span> <span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">log</span><span class="token punctuation">(</span>message<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// returns a thunk</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword module">export</span> <span class="token keyword">const</span> main <span class="token operator">=</span> <span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;hello!&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// there&#x27;s nothing in the output at this point</span>
<span class="token comment">// because `main` is only an inert value</span>
<span class="token comment">// representing the computation</span>

<span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// only when launching the program I will see the result</span>
</code></pre></div><div class="blog-post"><pre class="language-ts"><code class="language-ts"><span class="token keyword module">import</span> <span class="token imports"><span class="token punctuation">{</span> <span class="token maybe-class-name">Option</span> <span class="token punctuation">}</span></span> <span class="token keyword module">from</span> <span class="token string">&#x27;fp-ts/Option&#x27;</span>

<span class="token keyword">const</span> head <span class="token operator">=</span> <span class="token operator">&lt;</span><span class="token constant">A</span><span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token keyword module">as</span><span class="token operator">:</span> <span class="token maybe-class-name">ReadonlyArray</span><span class="token operator">&lt;</span><span class="token constant">A</span><span class="token operator">&gt;</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token maybe-class-name">Option</span><span class="token operator">&lt;</span><span class="token constant">A</span><span class="token operator">&gt;</span> <span class="token arrow operator">=&gt;</span>
    <span class="token keyword module">as</span><span class="token punctuation">.</span><span class="token property-access">length</span> <span class="token operator">===</span> <span class="token number">0</span> <span class="token operator">?</span> none <span class="token operator">:</span> <span class="token function"><span class="token maybe-class-name">Some</span></span><span class="token punctuation">(</span><span class="token keyword module">as</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
</code></pre></div><br/><hr style="border:.1px solid whiteSmoke"/><div style="height:15px"></div><ol><li id="fn1" style="font-family:Poppins;font-size:8px"><a href="https://github.com/enricopolanski/functional-programming" target="_blank">fp-ts</a><a href="#fnref1"></a></li><li id="fn2" style="font-family:Poppins;font-size:8px"><a href="https://lazyswamp.tistory.com/entry/functorsapplicativesandmonadsinpictures" target="_blank">functors</a><a href="#fnref2"></a></li></ol></div></article></div></div></main><footer style="font-size:0.625rem;font-weight:200;flex-shrink:0;margin:4.125rem">2022 © Henry</footer></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{}},"page":"/blog/11-fp","query":{},"buildId":"HPZ7aYl1DCoRILVvtuLIo","nextExport":true,"autoExport":true,"isFallback":false,"scriptLoader":[]}</script></body></html>