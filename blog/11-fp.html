<!DOCTYPE html><html lang="ko"><head><meta name="viewport" content="width=device-width, initial-scale=1"/><meta charSet="utf-8"/><meta name="Description" content="Personal Blog"/><title>Henry&#x27;s log</title><meta name="next-head-count" content="4"/><link rel="preload" href="/_next/static/css/8753b5195e73e8ea.css" as="style"/><link rel="stylesheet" href="/_next/static/css/8753b5195e73e8ea.css" data-n-g=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-c67a75d1b6f99dc8.js"></script><script src="/_next/static/chunks/webpack-f35b0cc4e8fe175b.js" defer=""></script><script src="/_next/static/chunks/framework-5f4595e5518b5600.js" defer=""></script><script src="/_next/static/chunks/main-9b95277ed2619e28.js" defer=""></script><script src="/_next/static/chunks/pages/_app-e05cfdcf00db1716.js" defer=""></script><script src="/_next/static/chunks/184-8452e3c4cd85067e.js" defer=""></script><script src="/_next/static/chunks/24-f201b3554b65d116.js" defer=""></script><script src="/_next/static/chunks/pages/blog/11-fp-67eb887c4ee6af86.js" defer=""></script><script src="/_next/static/aSp9_CEeJguK0JYyYuJFl/_buildManifest.js" defer=""></script><script src="/_next/static/aSp9_CEeJguK0JYyYuJFl/_ssgManifest.js" defer=""></script><style id="__jsx-976264879">.hide.jsx-976264879{display:none;}h1.jsx-976264879{font-size:1.5rem;font-weight:700;color:var(--color-header);font-family:"Recoleta-bold";}.great-title.jsx-976264879{margin-top:2.5rem;font-size:3.125rem;text-align:center;color:var(--color-header);}.details.jsx-976264879 span.jsx-976264879{color:#bdbdbd;margin-right:1rem;}.details.jsx-976264879{font-weight:300;margin-bottom:2px;font-size:11pt;line-height:22pt;-webkit-letter-spacing:0.8px;-moz-letter-spacing:0.8px;-ms-letter-spacing:0.8px;letter-spacing:0.8px;font-family:"Poppins",NotoSansKR-Thin;}.date.jsx-976264879{font-size:15px;}</style></head><body><script>(function() {
	function setInitialColorMode() {
  function getInitialColorMode() {
    const persistedColorPreference = window.localStorage.getItem("theme");
    const hasPersistedPreference = typeof persistedColorPreference === "string";
    /**
     * If the user has explicitly chosen light or dark,
     * use it. Otherwise, this value will be null.
     */

    if (hasPersistedPreference) {
      return persistedColorPreference;
    } // If there is no saved preference, use a media query


    const mql = window.matchMedia("(prefers-color-scheme: dark)");
    const hasMediaQueryPreference = typeof mql.matches === "boolean";

    if (hasMediaQueryPreference) {
      return mql.matches ? "dark" : "light";
    } // default to 'light'.


    return "light";
  }

  const colorMode = getInitialColorMode();
  const root = document.documentElement;
  root.style.setProperty("--initial-color-mode", colorMode); // add HTML attribute if dark mode

  if (colorMode === "dark") document.documentElement.setAttribute("data-theme", "dark");
}
	setInitialColorMode();
})()
</script><div id="__next" data-reactroot=""><div class="container"><main><div style="display:flex;align-items:center;justify-content:center;margin:0 4rem 0 4rem;flex-shrink:0"><div class="shake-it" style="flex:9"><a href="/"><h1 style="font-size:1.125rem">Henry</h1></a></div><div style="flex-shrink:0;width:15px"></div><a href="/blog"><h2 style="font-size:0.825rem;padding-right:5px">Blog</h2></a><div style="flex-shrink:0;width:25px"></div><a href="https://lee-note.notion.site/82a3ac3053a9457b9f1a4e1b3d7baedc?v=2acb0e3dd5c64d4d8582ee28f193acd7" target="_blank"><h2 style="font-size:0.825rem">Read</h2></a><div style="flex-shrink:0;width:15px"></div><div style="flex-shrink:0;width:15px"></div><label style="padding-bottom:2.8px"><input type="checkbox"/><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 64 64" style="position:relative;font-size:25px;top:3.465px"><path d="M34.4 5.3c-1.1 2.9 0 10.2 1.6 10.2 1.9 0 2.2-10.6.3-11.2-.7-.3-1.6.2-1.9 1zM13 14.3c0 1.6 6.2 7.7 7.8 7.7 2.2 0 1.3-2.6-2.1-5.8-3.5-3.4-5.7-4.1-5.7-1.9z"></path><path d="M52 17.5 47.5 22l-4-2c-14.4-7.4-31 9.2-23.6 23.5l2.1 3.9-4.5 4.6c-4.5 4.6-5.6 7-3.2 7C15.9 59 59 15.9 59 14.2c0-2.4-2.6-1.2-7 3.3zm-10.5 5.7c1.4.6 2.5 1.4 2.5 1.7 0 1-18.9 19.6-19.3 19-3.2-3.5-3.5-10.1-.7-14.7 3.8-6.2 11.4-8.8 17.5-6zM4.5 35c-1.3 2.1 1.1 3.1 6.1 2.8 3.6-.2 4.9-.7 4.9-1.8 0-1.9-9.9-2.7-11-1z"></path></svg></label></div><div class="content"><div><h1 class="jsx-976264879 great-title">Category Theory</h1><div class="jsx-976264879 details"><span class="jsx-976264879 hide">Aug 25, 2022</span></div><article><div style="margin-top:4rem;font-family:Recoleta, NotoSansKR-Thin, MalgunGothic;font-size:11pt;line-height:22pt;letter-spacing:.8px"><h1>Category Theory <sup><a href="#fn1" id="fnref1"> ¹ </a></sup></h1><p>카테고리 이론은 Object 사이의 morphism을 정의한다. composition을 정의하기에 적합한 이론이다. 합성을 위해서는 정의역과 치역의 타입이 일치해야한다.
타입스크립트에서는 Object는 타입이고 morphism 은 함수가 된다.</p><div class="blog-post"><pre class="language-ts"><code class="language-ts"><span class="token doc-comment comment">/** f :: (a: A) =&gt; B */</span>
<span class="token keyword">const</span> f <span class="token operator">=</span> <span class="token punctuation">(</span>s<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">number</span> <span class="token arrow operator">=&gt;</span> s<span class="token punctuation">.</span><span class="token property-access">length</span><span class="token punctuation">;</span>
<span class="token doc-comment comment">/** g :: (c: C) =&gt; D */</span>
<span class="token keyword">const</span> g <span class="token operator">=</span> <span class="token punctuation">(</span>n<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">boolean</span> <span class="token arrow operator">=&gt;</span> n <span class="token operator">&gt;</span> <span class="token number">2</span><span class="token punctuation">;</span>

<span class="token doc-comment comment">/**
* gf = g ∘ f
* gf :: (a: A) =&gt; D
* C = B
*/</span>
<span class="token keyword">const</span> gf <span class="token operator">=</span> <span class="token punctuation">(</span>s<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">boolean</span> <span class="token arrow operator">=&gt;</span> <span class="token function">g</span><span class="token punctuation">(</span><span class="token function">f</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token generic-function"><span class="token function">flow</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token constant">A</span><span class="token punctuation">,</span> <span class="token constant">B</span><span class="token punctuation">,</span> <span class="token constant">C</span><span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span><span class="token function-variable function">f</span><span class="token operator">:</span> <span class="token punctuation">(</span>a<span class="token operator">:</span> <span class="token constant">A</span><span class="token punctuation">)</span> <span class="token arrow operator">=&gt;</span> <span class="token constant">B</span><span class="token punctuation">,</span> <span class="token function-variable function">g</span><span class="token operator">:</span> <span class="token punctuation">(</span>b<span class="token operator">:</span> <span class="token constant">B</span><span class="token punctuation">)</span> <span class="token arrow operator">=&gt;</span> <span class="token constant">C</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token punctuation">(</span>a<span class="token operator">:</span> <span class="token constant">A</span><span class="token punctuation">)</span> <span class="token arrow operator">=&gt;</span> <span class="token constant">C</span> <span class="token punctuation">{</span>
    <span class="token keyword control-flow">return</span> <span class="token punctuation">(</span>a<span class="token punctuation">)</span> <span class="token arrow operator">=&gt;</span> <span class="token function">g</span><span class="token punctuation">(</span><span class="token function">f</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token generic-function"><span class="token function">pipe</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token constant">A</span><span class="token punctuation">,</span> <span class="token constant">B</span><span class="token punctuation">,</span> <span class="token constant">C</span><span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span>a<span class="token operator">:</span> <span class="token constant">A</span><span class="token punctuation">,</span> <span class="token function-variable function">f</span><span class="token operator">:</span> <span class="token punctuation">(</span>a<span class="token operator">:</span> <span class="token constant">A</span><span class="token punctuation">)</span> <span class="token arrow operator">=&gt;</span> <span class="token constant">B</span><span class="token punctuation">,</span> <span class="token function-variable function">g</span><span class="token operator">:</span> <span class="token punctuation">(</span>b<span class="token operator">:</span> <span class="token constant">B</span><span class="token punctuation">)</span> <span class="token arrow operator">=&gt;</span> <span class="token constant">C</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token constant">C</span>
    <span class="token keyword control-flow">return</span> <span class="token function">flow</span><span class="token punctuation">(</span>f<span class="token punctuation">,</span> g<span class="token punctuation">)</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><br/><h1>Functors <sup><a href="#fn2" id="fnref2"> ² </a></sup></h1><p>순수함수는 가변성을 금지하고 참조투명성을 위반하지 않아야 하며 이를 위반하는 요소는 사이드 이펙트로 간주한다.
하지만 이러한 사이드 이펙트를 완전히 배제해서는 프로그램을 개발할 수 없다. 따라서 효과적으로 이펙트를 관리하기 위해 몇가지 방법을 사용하는데 펑터도 그중 하나다.</p><div class="custom-blockquote"><p>Why is finding solutions to this problem so important? Because, if it is
true that categories can be used to model programming languages, morphisms
(functions in the TS category) can be used to model programs. Thus, solving
this abstract problem means finding a concrete way of composing programs in
a generic way. And that is really interesting for us developers, isn&#x27;t it?</p></div><div class="blog-post"><pre class="language-ts"><code class="language-ts"><span class="token doc-comment comment">/** 
 * 펑터는 일종의 컨테이너 다.
 * n -ary 타입 생성자로 모든 `X` 타입을 `F&lt;X&gt;`로 매핑한다. 
 **/</span>
map<span class="token operator">:</span> <span class="token operator">&lt;</span><span class="token constant">A</span><span class="token punctuation">,</span> <span class="token constant">B</span><span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token function-variable function">f</span><span class="token operator">:</span> <span class="token punctuation">(</span>a<span class="token operator">:</span> <span class="token constant">A</span><span class="token punctuation">)</span> <span class="token arrow operator">=&gt;</span> <span class="token constant">B</span><span class="token punctuation">)</span> <span class="token arrow operator">=&gt;</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>fa<span class="token operator">:</span> <span class="token constant">F</span><span class="token operator">&lt;</span><span class="token constant">A</span><span class="token operator">&gt;</span><span class="token punctuation">)</span> <span class="token arrow operator">=&gt;</span> <span class="token constant">F</span><span class="token operator">&lt;</span><span class="token constant">B</span><span class="token operator">&gt;</span><span class="token punctuation">)</span>
</code></pre></div><br/><h2>Functions as programs</h2><p>함수로 프로그램을 모델링하려고 하면 바로 문제에 직면하게 된다.</p><div class="custom-blockquote"><p>사이드 이펙트를 발생시키는 순수함수를 어떻게 구현 가능한 것인가? <hr/>
정답은 바로 사이드 이펙트를 의미하는 타입인 effects를 생성하여 이를 통해 사이드
이펙트를 모델링하는 것이다.</p></div><br/><p>DSL</p><span style="height:10px"></span><p>함수가 사이드 이펙트에 대한 설명을 반환하도록 공역을 변경한다.</p><div class="blog-post"><pre class="language-ts"><code class="language-ts"><span class="token keyword">type</span> <span class="token class-name"><span class="token constant">DSL</span></span> <span class="token operator">=</span> <span class="token spread operator">...</span> <span class="token comment">// sum type of every possible effect handled by the system</span>
<span class="token keyword">function</span> <span class="token function">log</span><span class="token punctuation">(</span>message<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token constant">DSL</span> <span class="token punctuation">{</span>
    <span class="token keyword control-flow">return</span> <span class="token punctuation">{</span>
        type<span class="token operator">:</span> <span class="token string">&quot;log&quot;</span><span class="token punctuation">,</span>
        message
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><br/><p>THUNK</p><span style="font-family:Poppins"><p>A Thunk representing a synchronous side effect</p></span><div class="blog-post"><pre class="language-ts"><code class="language-ts"><span class="token comment">// a thunk representing a synchronous side effect</span>
<span class="token keyword">type</span> <span class="token class-name"><span class="token constant">IO</span><span class="token operator">&lt;</span><span class="token constant">A</span><span class="token operator">&gt;</span></span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=&gt;</span> <span class="token constant">A</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> log <span class="token operator">=</span> <span class="token punctuation">(</span>message<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token constant">IO</span><span class="token operator">&lt;</span><span class="token keyword">void</span><span class="token operator">&gt;</span> <span class="token arrow operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword control-flow">return</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=&gt;</span> <span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">log</span><span class="token punctuation">(</span>message<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// returns a thunk</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword module">export</span> <span class="token keyword">const</span> main <span class="token operator">=</span> <span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;hello!&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// there&#x27;s nothing in the output at this point</span>
<span class="token comment">// because `main` is only an inert value</span>
<span class="token comment">// representing the computation</span>

<span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// only when launching the program I will see the result</span>
</code></pre></div><br/><br/><h1>Decomposition</h1><p>예제에서 나온 코드를 바탕으로 일반 코드에서의 상황을 고려해보자. FP의 특성은 작은 모듈(순수함수)로 나누어 데이터에 대한 연산을 처리(일종의 SRP 처럼 동작하도록)한후 함수들을 합성하여 프로그램을 형성한다.
이러한 관점을 토대로 함수를 구현할때 문제를 분해하는 사고가 필요하다.</p><p><br/> 유저 데이터로부터 팔로워의 이름을 가져오는 코드를 작성한다고 해보자.
데이터를 파싱하기 위해 일련의 순서를 따를 수 있다.</p><ul>
<li>인터페이스를 통해 가져와야할 데이터의 타입을 알 수 있다.</li>
<li>팔로워의 타입은 <code>ReadonlyArray&lt;T&gt;</code> 이며 우리가 원하는 이름은 <code>string</code> 이다.</li>
<li>따라서 구현해야할 함수를 2가지로 보고 follower 데이터만을 출력하는 함수와 팔로워의 이름을 출력하는 함수를 생성한다.</li>
<li>두 가지 함수를 구현했다면 합성을 통해 보다 표현력이 높은 코드를 작성할 수 있다.</li>
<li>다만 여기서 타입(morphism)이 다른 함수를 합성하기 위해서 함수의 변형이 필요한데 이를 functor를 통해 해결할 수 있다.</li>
</ul><div class="blog-post"><pre class="language-ts"><code class="language-ts"><span class="token keyword module">import</span> <span class="token imports"><span class="token punctuation">{</span> flow <span class="token punctuation">}</span></span> <span class="token keyword module">from</span> <span class="token string">&#x27;fp-ts/function&#x27;</span>

<span class="token keyword">interface</span> <span class="token class-name"><span class="token maybe-class-name">User</span></span> <span class="token punctuation">{</span>
    <span class="token keyword">readonly</span> id<span class="token operator">:</span> <span class="token builtin">number</span>
    <span class="token keyword">readonly</span> name<span class="token operator">:</span> <span class="token builtin">string</span>
    <span class="token keyword">readonly</span> followers<span class="token operator">:</span> <span class="token maybe-class-name">ReadonlyArray</span><span class="token operator">&lt;</span><span class="token maybe-class-name">User</span><span class="token operator">&gt;</span>
<span class="token punctuation">}</span>
<span class="token doc-comment comment">/** map :: (g: (b: T) -&gt; U) -&gt; (fb: F&lt;T&gt;) -&gt; F&lt;U&gt; */</span>
<span class="token keyword">const</span> map <span class="token operator">=</span> <span class="token operator">&lt;</span><span class="token constant">B</span><span class="token punctuation">,</span> <span class="token constant">C</span><span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token function-variable function">g</span><span class="token operator">:</span> <span class="token punctuation">(</span>b<span class="token operator">:</span> <span class="token constant">B</span><span class="token punctuation">)</span> <span class="token arrow operator">=&gt;</span> <span class="token constant">C</span><span class="token punctuation">)</span> <span class="token arrow operator">=&gt;</span> <span class="token punctuation">(</span>fb<span class="token operator">:</span> <span class="token maybe-class-name">ReadonlyArray</span><span class="token operator">&lt;</span><span class="token constant">B</span><span class="token operator">&gt;</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token maybe-class-name">ReadonlyArray</span><span class="token operator">&lt;</span><span class="token constant">C</span><span class="token operator">&gt;</span> <span class="token arrow operator">=&gt;</span> fb<span class="token punctuation">.</span><span class="token method function property-access">map</span><span class="token punctuation">(</span>g<span class="token punctuation">)</span>

<span class="token doc-comment comment">/** g :: (a: T) -&gt; F&lt;T&gt; */</span>
<span class="token keyword">const</span> get_followers <span class="token operator">=</span> <span class="token punctuation">(</span>user<span class="token operator">:</span> <span class="token maybe-class-name">User</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token maybe-class-name">ReadonlyArray</span><span class="token operator">&lt;</span><span class="token maybe-class-name">User</span><span class="token operator">&gt;</span> <span class="token arrow operator">=&gt;</span> user<span class="token punctuation">.</span><span class="token property-access">followers</span>
<span class="token doc-comment comment">/** f :: (a: T) -&gt; String */</span>
<span class="token keyword">const</span> get_name <span class="token operator">=</span> <span class="token punctuation">(</span>user<span class="token operator">:</span> <span class="token maybe-class-name">User</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">string</span> <span class="token arrow operator">=&gt;</span> user<span class="token punctuation">.</span><span class="token property-access">name</span>
<span class="token doc-comment comment">/** T -&gt; F&lt;String&gt; */</span>
<span class="token keyword">const</span> get_followers_name <span class="token operator">=</span> <span class="token function">flow</span><span class="token punctuation">(</span>get_followers<span class="token punctuation">,</span> <span class="token function">map</span><span class="token punctuation">(</span>get_name<span class="token punctuation">)</span><span class="token punctuation">)</span>

<span class="token keyword">const</span> user<span class="token operator">:</span> <span class="token maybe-class-name">User</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
    id<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
    name<span class="token operator">:</span> <span class="token string">&#x27;Ruth R. Gonzalez&#x27;</span><span class="token punctuation">,</span>
    followers<span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token punctuation">{</span> id<span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span> name<span class="token operator">:</span> <span class="token string">&#x27;Terry R. Emerson&#x27;</span><span class="token punctuation">,</span> followers<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">{</span> id<span class="token operator">:</span> <span class="token number">3</span><span class="token punctuation">,</span> name<span class="token operator">:</span> <span class="token string">&#x27;Marsha J. Joslyn&#x27;</span><span class="token punctuation">,</span> followers<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
<span class="token punctuation">}</span>

<span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">log</span><span class="token punctuation">(</span><span class="token function">get_followers_name</span><span class="token punctuation">(</span>user<span class="token punctuation">)</span><span class="token punctuation">)</span>  <span class="token comment">// [ &#x27;Terry R. Emerson&#x27;, &#x27;Marsha J. Joslyn&#x27; ]</span>
</code></pre><br/><br/><h1>Functors and Functional error handling</h1><div class="think"><p>함수형 프로그래밍은 에러를 발생시키보다는 값을 반환한다. 이 경우에 어떤 장점이 존재하는가?</p></div><div class="blog-post"><pre class="language-ts"><code class="language-ts"><span class="token keyword">declare</span> <span class="token keyword">const</span> <span class="token function-variable function">do_something_with_index</span><span class="token operator">:</span> <span class="token punctuation">(</span>index<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">)</span> <span class="token arrow operator">=&gt;</span> <span class="token builtin">string</span>

<span class="token doc-comment comment">/** before applying the functor */</span>
<span class="token keyword">const</span> program <span class="token operator">=</span> <span class="token punctuation">(</span>ns<span class="token operator">:</span> <span class="token maybe-class-name">ReadonlyArray</span><span class="token operator">&lt;</span><span class="token builtin">number</span><span class="token operator">&gt;</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">string</span> <span class="token arrow operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> i <span class="token operator">=</span> ns<span class="token punctuation">.</span><span class="token method function property-access">findIndex</span><span class="token punctuation">(</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span> <span class="token arrow operator">=&gt;</span> n <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span>
    <span class="token keyword control-flow">if</span> <span class="token punctuation">(</span>i <span class="token operator">!==</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token keyword control-flow">return</span> <span class="token function">do_something_with_index</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span>
    <span class="token keyword control-flow">throw</span> <span class="token keyword">new</span> <span class="token class-name"><span class="token known-class-name class-name">Error</span></span><span class="token punctuation">(</span><span class="token string">&#x27;cannt find a positive number&#x27;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token doc-comment comment">/** after applying the functor */</span>
<span class="token keyword">const</span> program <span class="token operator">=</span> <span class="token punctuation">(</span>ns<span class="token operator">:</span> <span class="token maybe-class-name">ReadonlyArray</span><span class="token operator">&lt;</span><span class="token builtin">number</span><span class="token operator">&gt;</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token maybe-class-name">Option</span><span class="token operator">&lt;</span><span class="token builtin">string</span><span class="token operator">&gt;</span> <span class="token arrow operator">=&gt;</span>
    <span class="token function">pipe</span><span class="token punctuation">(</span>
        ns<span class="token punctuation">,</span>
        <span class="token function">findIndex</span><span class="token punctuation">(</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span> <span class="token arrow operator">=&gt;</span> n <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token function">map</span><span class="token punctuation">(</span>do_something_with_index<span class="token punctuation">)</span>
    <span class="token punctuation">)</span>
</code></pre></div><br/><br/><h1>Monad</h1><p>모나드는 함수형 프로그래밍에서 가장 중요한 추상화중 하나다. 모나드는 컨테이너 안으로 값을 리프팅하고 어떤 규칙을 정해 통제한다는 생각으로 자료형을 생성하는 것이다.
잘못된 입력이 넘어와도 컨테이너가 알아서 이를 처리한다.</p><div class="blog-post"><pre class="language-ts"><code class="language-ts"><span class="token number">1</span> <span class="token function-variable function">f</span><span class="token operator">:</span> <span class="token punctuation">(</span>a<span class="token operator">:</span> <span class="token constant">A</span><span class="token punctuation">)</span> <span class="token arrow operator">=&gt;</span> <span class="token constant">F</span><span class="token operator">&lt;</span><span class="token constant">B</span><span class="token operator">&gt;</span>
<span class="token number">2</span> <span class="token function-variable function">g</span><span class="token operator">:</span> <span class="token punctuation">(</span>b<span class="token operator">:</span> <span class="token constant">B</span><span class="token punctuation">)</span> <span class="token arrow operator">=&gt;</span> <span class="token constant">F</span><span class="token operator">&lt;</span><span class="token constant">C</span><span class="token operator">&gt;</span>
</code></pre></div><br/><h1>Monad Definition</h1><ol>
<li>펑터 인스턴스를 허용하는 타입 생성자 M</li>
<li><code>of: &lt;A&gt;(a: &lt;A&gt;) =&gt; M&lt;A&gt;</code> 의 시그니쳐가 있는 함수</li>
<li><code>chain: &lt;A, B&gt;(f: (a: A) =&gt; M&lt;B&gt;) =&gt; (ma: M&lt;A&gt;) =&gt; M&lt;B&gt;</code> 의 시그니쳐가 있는 함수</li>
</ol></div><br/><hr style="border:.1px solid whiteSmoke"/><div style="height:15px"></div><ol><li id="fn1" style="font-family:Poppins;font-size:8px"><a style="font-family:Poppins;font-size:8px" href="https://github.com/enricopolanski/functional-programming" target="_blank">fp-ts</a><a href="#fnref1"></a></li><li id="fn2" style="font-family:Poppins;font-size:8px"><a style="font-family:Poppins;font-size:8px" href="https://lazyswamp.tistory.com/entry/functorsapplicativesandmonadsinpictures" target="_blank">functors</a><a href="#fnref2"></a></li></ol></div></article></div></div></main><footer style="font-size:0.625rem;font-weight:200;flex-shrink:0;margin:4.125rem">2023 © Henry</footer></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{}},"page":"/blog/11-fp","query":{},"buildId":"aSp9_CEeJguK0JYyYuJFl","nextExport":true,"autoExport":true,"isFallback":false,"scriptLoader":[]}</script></body></html>